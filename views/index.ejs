<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Available Bus Routes</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body class="bg-gray-100 min-h-screen">

    <%- include('partials/navbar') %>

        <div class="relative w-full overflow-hidden h-[500px] mt-2">
            <div id="carousel" class="flex transition-transform duration-700 ease-in-out w-full h-full">
                <div class="min-w-full h-full bg-cover bg-center relative flex items-center justify-center text-white text-4xl font-bold"
                    style="background-image: url('/bus.jpg');">
                    <span class="p-7 rounded-full bg-red-500 text-white">Comfortable Travel</span>
                </div>
                <div class="min-w-full h-full bg-cover bg-center relative flex items-center justify-center text-white text-4xl font-bold"
                    style="background-image: url('/bus1.jpg');">
                    <span class="p-7 rounded-full bg-red-500 text-white">Comfortable Travel</span>
                </div>
                <div class="min-w-full h-full bg-cover bg-center relative flex items-center justify-center text-white text-4xl font-bold"
                    style="background-image: url('/bus2.jpg');">
                    <span class="p-7 rounded-full bg-red-500 text-white">Comfortable Travel</span>
                </div>
                <div class="min-w-full h-full bg-cover bg-center relative flex items-center justify-center text-white text-4xl font-bold"
                    style="background-image: url('/bus3.jpg');">
                    <span class="p-7 rounded-full bg-red-500 text-white">Comfortable Travel</span>
                </div>
                <div class="min-w-full h-full bg-cover bg-center relative flex items-center justify-center text-white text-4xl font-bold"
                    style="background-image: url('/bus4.jpg');">
                    <span class="p-7 rounded-full bg-red-500 text-white">Comfortable Travel</span>
                </div>
            </div>

            <button onclick="prevSlide()"
                class="absolute left-5 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-50 hover:bg-opacity-80 px-3 py-2 rounded-full shadow-md text-2xl font-bold">
                ‹
            </button>
            <button onclick="nextSlide()"
                class="absolute right-5 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-50 hover:bg-opacity-80 px-3 py-2 rounded-full shadow-md text-2xl font-bold">
                ›
            </button>
        </div>

        <section>
            <div class="text-2xl mt-4 font-semibold text-center">Top Search <span class="text-red-500">Routes</span>
            </div>

            <% if (routes.length> 0) { %>
                <div class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 px-4">
                    <% routes.forEach(route=> { %>
                        <div class="p-4 border border-gray-300 rounded-lg shadow bg-white">
                            <% if (session && session.role=='admin' ) { %>
                                <form action="/admin/deleteroute/<%= route._id %>" method="get" class="float-right">
                                    <button type="submit" title="Delete Bus"
                                        class="text-red-600 hover:text-red-800 text-lg">
                                        <i class="bi bi-trash-fill"></i>
                                    </button>
                                </form>
                                <% } %>
                                    <ul>
                                        <div class="flex justify-between items-center mb-2">
                                            <div>
                                                <p class="text-gray-700 text-sm">From:</p>
                                                <span class="font-semibold">
                                                    <%= route.origin %>
                                                </span>
                                            </div>
                                            <div>
                                                <p
                                                    class="border border-gray-400 rounded-xl p-1 px-3 inline-block text-gray-700">
                                                    <%= route.km %> KM
                                                </p>
                                            </div>
                                            <div>
                                                <p class="text-gray-700 text-sm">To:</p>
                                                <span class="font-semibold">
                                                    <%= route.destination %>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="flex justify-between items-center mb-2 text-gray-700">
                                            <div class="flex gap-2 items-center">
                                                wifi <i class="bi bi-wifi"></i>
                                                Display <i class="bi bi-display"></i>
                                                <%= route.busType %> <i class="bi bi-bus-front"></i>
                                            </div>
                                            <p class="text-sm">
                                                <%= route.startingTime %> - <%= route.arrivingTime %>
                                            </p>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <p class="font-bold text-lg">$ <%= route.price %>
                                            </p>
                                            <a href="/book/<%= route._id %>"
                                                class="bg-red-500 text-white px-6 py-2 rounded hover:scale-105 transition duration-300 text-sm">Reserve
                                                Seat</a>
                                        </div>
                                    </ul>
                        </div>
                        <% }) %>
                </div>
                <% } else { %>
                    <p class="text-center text-gray-600 p-5">No routes available at the moment.</p>
                    <% } %>
        </section>

        <%- include('partials/footer') %>

            <script>
                let index = 0;
                const carousel = document.getElementById('carousel');
                const totalSlides = carousel.children.length;

                function updateSlide() {
                    carousel.style.transform = `translateX(-${index * 100}%)`;
                }

                function nextSlide() {
                    index = (index + 1) % totalSlides;
                    updateSlide();
                }

                function prevSlide() {
                    index = (index - 1 + totalSlides) % totalSlides;
                    updateSlide();
                }

                setInterval(nextSlide, 3000);
            </script>
</body>

</html>